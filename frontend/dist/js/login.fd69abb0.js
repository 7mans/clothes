(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{1791:function(s,o,a){},"9b19":function(s,o,a){s.exports=a.p+"img/logo.fd1e1b22.svg"},a55b:function(s,o,a){"use strict";a.r(o);var r=function(){var s=this,o=s._self._c;return o("div",{staticClass:"auth-page"},[o("div",{staticClass:"auth-card"},[o("div",{staticClass:"auth-header"},[o("router-link",{attrs:{to:"/"}},[o("img",{staticClass:"logo-img",attrs:{src:a("9b19"),alt:"AI2Cloth Logo"}})]),o("h2",[s._v("欢迎回来")]),o("p",[s._v("登录以继续你的时尚之旅")])],1),o("form",{staticClass:"auth-form",on:{submit:function(o){return o.preventDefault(),s.handleLogin.apply(null,arguments)}}},[o("div",{staticClass:"form-item",class:{error:s.errors.email}},[o("div",{staticClass:"input-wrapper"},[o("span",{staticClass:"input-icon"},[s._v("📧")]),o("input",{directives:[{name:"model",rawName:"v-model",value:s.loginForm.email,expression:"loginForm.email"}],staticClass:"form-input",attrs:{type:"email",placeholder:"邮箱"},domProps:{value:s.loginForm.email},on:{blur:s.validateEmail,input:function(o){o.target.composing||s.$set(s.loginForm,"email",o.target.value)}}})]),s.errors.email?o("div",{staticClass:"error-message"},[s._v(s._s(s.errors.email))]):s._e()]),o("div",{staticClass:"form-item",class:{error:s.errors.password}},[o("div",{staticClass:"input-wrapper"},[o("span",{staticClass:"input-icon"},[s._v("🔒")]),"checkbox"===(s.showPassword?"text":"password")?o("input",{directives:[{name:"model",rawName:"v-model",value:s.loginForm.password,expression:"loginForm.password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:"checkbox"},domProps:{checked:Array.isArray(s.loginForm.password)?s._i(s.loginForm.password,null)>-1:s.loginForm.password},on:{blur:s.validatePassword,change:function(o){var a=s.loginForm.password,r=o.target,t=!!r.checked;if(Array.isArray(a)){var e=null,i=s._i(a,e);r.checked?i<0&&s.$set(s.loginForm,"password",a.concat([e])):i>-1&&s.$set(s.loginForm,"password",a.slice(0,i).concat(a.slice(i+1)))}else s.$set(s.loginForm,"password",t)}}}):"radio"===(s.showPassword?"text":"password")?o("input",{directives:[{name:"model",rawName:"v-model",value:s.loginForm.password,expression:"loginForm.password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:"radio"},domProps:{checked:s._q(s.loginForm.password,null)},on:{blur:s.validatePassword,change:function(o){return s.$set(s.loginForm,"password",null)}}}):o("input",{directives:[{name:"model",rawName:"v-model",value:s.loginForm.password,expression:"loginForm.password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:s.showPassword?"text":"password"},domProps:{value:s.loginForm.password},on:{blur:s.validatePassword,input:function(o){o.target.composing||s.$set(s.loginForm,"password",o.target.value)}}}),o("button",{staticClass:"password-toggle",attrs:{type:"button"},on:{click:function(o){s.showPassword=!s.showPassword}}},[s._v(" "+s._s(s.showPassword?"🙈":"👁️")+" ")])]),s.errors.password?o("div",{staticClass:"error-message"},[s._v(s._s(s.errors.password))]):s._e()]),o("div",{staticClass:"form-item"},[o("button",{staticClass:"auth-button",class:{loading:s.loading},attrs:{type:"submit",disabled:s.loading}},[s.loading?o("span",{staticClass:"loading-spinner"}):s._e(),s._v(" "+s._s(s.loading?"登录中...":"立即登录")+" ")])])]),o("div",{staticClass:"auth-footer"},[s._v(" 还没有账户？ "),o("router-link",{attrs:{to:"/register"}},[s._v("立即注册")])],1)])])},t=[],e=(a("14d9"),a("2f62")),i={name:"Login",data(){return{loading:!1,showPassword:!1,loginForm:{email:"",password:""},errors:{email:"",password:""}}},methods:{...Object(e["b"])("auth",["login"]),validateEmail(){this.errors.email="",this.loginForm.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.loginForm.email)||(this.errors.email="请输入正确的邮箱格式"):this.errors.email="请输入邮箱"},validatePassword(){this.errors.password="",this.loginForm.password||(this.errors.password="请输入密码")},validateForm(){return this.validateEmail(),this.validatePassword(),!this.errors.email&&!this.errors.password},async handleLogin(){if(this.validateForm()){this.loading=!0;try{await this.login(this.loginForm);const s=this.$route.query.redirect||"/dashboard";this.$router.push(s),this.showMessage("登录成功！","success")}catch(o){var s;const a=(null===(s=o.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.detail)||"登录失败，请检查您的凭据。";this.showMessage(a,"error")}finally{this.loading=!1}}},showMessage(s,o="info"){const a=document.createElement("div");a.className="custom-message custom-message-"+o,a.textContent=s,Object.assign(a.style,{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",padding:"12px 20px",borderRadius:"6px",color:"white",fontSize:"14px",zIndex:"9999",transition:"all 0.3s ease"}),a.style.backgroundColor="error"===o?"#F56C6C":"success"===o?"#67C23A":"#409EFF",document.body.appendChild(a),setTimeout(()=>{a.style.opacity="0",setTimeout(()=>{document.body.removeChild(a)},300)},3e3)}}},l=i,n=(a("a8fd"),a("2877")),d=Object(n["a"])(l,r,t,!1,null,"43773fb0",null);o["default"]=d.exports},a8fd:function(s,o,a){"use strict";a("1791")}}]);
//# sourceMappingURL=login.fd69abb0.js.map